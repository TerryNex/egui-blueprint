# Array 節點使用指南

在 egui-blueprint 中，Array（數組）節點被歸類在 **Data Operations（數據操作）** 模組下。主要分為兩類：**純函數節點**（無執行流，直接輸出值）和**操作節點**（帶執行流，修改變量內容）。

## 1. 基礎節點 (Pure Functions)

這些節點不帶箭頭（執行流），每當下游節點需要數據時，它們會即時計算輸出的值。

### Array Create (創建數組)

- **用途**：創建一個空的數組。
- **輸出 (Array)**：輸出的空數組可以連接到 `Array Get` 或 `Array Length` 的輸入端。

### Array Get (獲取元素)

- **輸入 (Array)**：要從中讀取的數組。
- **輸入 (Index)**：索引值（從 0 開始）。
- **輸出 (Value)**：獲取到的元素。如果索引超出範圍，則輸出 `None`。

### Array Length (獲取長度)

- **輸入 (Array)**：目標數組。
- **輸出 (Length)**：數組的長度（整數）。

---

## 2. 操作節點 (Action Nodes)

這些節點帶有執行流（白色箭頭），它們會直接修改**全局變量**中的數組內容。

### Array Push (推入元素)

- **輸入 (Variable)**：**變量名稱**（字符串，例如 "myList"）。
- **輸入 (Value)**：要加入數組末尾的值。
- **說明**：執行此節點後，名為 `Variable` 的數組末尾會新增一個元素。如果該變量不存在，會自動創建一個包含該元素的新數組。

### Array Pop (彈出元素)

- **輸入 (Variable)**：**變量名稱**。
- **輸出 (Value)**：被移除（彈出）的最後一個元素。
- **說明**：移除並返回數組最後一個元素。如果數組為空，則返回 `None`。

### Array Set (修改元素)

- **輸入 (Variable)**：**變量名稱**。
- **輸入 (Index)**：要修改的索引位置。
- **輸入 (Value)**：新設定的值。
- **說明**：將數組中指定索引的元素替換為新值。如果索引大於數組當前長度，數組會自動擴大並用 `None` 填充中間的空位。

---

## 3. 使用範例：如何循環遍歷數組？

1. 使用 `Get Variable` 獲取數組變量。
2. 將其連接到 `Array Length`。
3. 將長度連接到 `For Loop` 的 `End` 輸入。
4. 在循環體中，使用 `Array Get` 配合 `For Loop` 的 `Index` 輸出，即可逐一讀取數組中的元素。

---

## 4. 進階：JSON 轉換

- 使用 `JSON Parse` 可以將字符串（例如 API 返回的 JSON）轉換為數組。
- 使用 `JSON Stringify` 可以將數組轉換回 JSON 字符串，方便寫入文件或發送 HTTP 請求。
